<div class="page-header">
  <h1>Users</h1>
  <button pButton label="Add User" icon="pi pi-plus" class="btn-custom" (click)="openAddDialog()"></button>
</div>

<div class="custom-card">
  <p-table 
   
    [paginator]="true" 
    [rows]="10"
    styleClass="p-datatable-sm">
    
    <ng-template pTemplate="header">
      <tr>
        <th>Username</th>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Branch</th>
        <th>Status</th>
        <th style="width: 120px">Actions</th>
      </tr>
    </ng-template>
    
    <ng-template pTemplate="body" let-user>
      <tr>
        <td><span class="username">{{ user.username }}</span></td>
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
        <td>
          <p-tag [value]="user.role | titlecase" [severity]="getRoleSeverity(user.role)"></p-tag>
        </td>
        <td>{{ user.branch }}</td>
        <td>
          <p-tag 
            [value]="user.active ? 'Active' : 'Inactive'" 
            [severity]="user.active ? 'success' : 'secondary'">
          </p-tag>
        </td>
        <td>
          <div class="action-buttons">
            <button pButton icon="pi pi-pencil" class="p-button-text p-button-sm" (click)="editUser(user)"></button>
            <button pButton [icon]="user.active ? 'pi pi-ban' : 'pi pi-check'" class="p-button-text p-button-sm" (click)="toggleStatus(user)"></button>
            <button pButton icon="pi pi-trash" class="p-button-text p-button-danger p-button-sm" (click)="deleteUser(user)"></button>
          </div>
        </td>
      </tr>
    </ng-template>
    
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="7" class="text-center">No users found</td>
      </tr>
    </ng-template>
  </p-table>
</div>